# Production Environment Configuration Template
# ⚠️ SECURITY WARNING: Never commit this file with real credentials!
# Instructions:
# 1. Copy this file to .env.production
# 2. Replace ALL placeholder values with secure, environment-specific secrets
# 3. NEVER commit .env.production to version control
# 4. Use a secure secrets manager for production deployments

# Node Environment
NODE_ENV=production

# Frontend Configuration
VITE_API_URL=https://api.yourdomain.com
VITE_ML_SERVICE_URL=https://ml.yourdomain.com
VITE_WS_URL=wss://api.yourdomain.com

# Backend Configuration
PORT=3001
FRONTEND_URL=https://yourdomain.com

# Database Configuration
# Replace with your actual database connection details
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:5432/${POSTGRES_DB}
POSTGRES_HOST=postgres
POSTGRES_USER=
POSTGRES_PASSWORD=
POSTGRES_DB=cellsegmentation

# Redis Configuration
REDIS_URL=redis://:CHANGE_ME@redis:6379
REDIS_PASSWORD=CHANGE_ME

# JWT Configuration (Generate with: openssl rand -hex 32)
JWT_ACCESS_SECRET=CHANGE_ME_64_HEX_CHARS
JWT_REFRESH_SECRET=CHANGE_ME_64_HEX_CHARS
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=7d

# ML Service Configuration
ML_SERVICE_URL=http://ml-service:8000
ML_SERVICE_TIMEOUT=300000

# Email Configuration
SENDGRID_API_KEY=CHANGE_ME_SENDGRID_API_KEY
EMAIL_FROM=noreply@yourdomain.com
EMAIL_VERIFICATION_URL=https://yourdomain.com/verify-email

# Storage Configuration
STORAGE_TYPE=local
STORAGE_PATH=/app/uploads
# 5MB limit (5 * 1024 * 1024) - matches controller validation
MAX_FILE_SIZE=5242880
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/tiff,image/webp

# S3 Configuration (Optional - for cloud storage)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
S3_BUCKET_NAME=

# Monitoring Configuration
PROMETHEUS_PORT=9090
GRAFANA_PORT=3030
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=CHANGE_ME

# Security Configuration
CORS_ORIGIN=https://yourdomain.com
# Production rate limits - adjust based on your API usage patterns
# Window in minutes, requests per window
# Recommended: 15 min window with 500-1000 requests for normal APIs
# For heavy endpoints (batch/image processing), consider separate limits
RATE_LIMIT_WINDOW=15
RATE_LIMIT_MAX_REQUESTS=500
HELMET_CSP_ENABLED=true

# SSL Configuration
SSL_CERT_PATH=/etc/nginx/ssl/server.crt
SSL_KEY_PATH=/etc/nginx/ssl/server.key

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=/backups

# Logging Configuration
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_PATH=/var/log/app